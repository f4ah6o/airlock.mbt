<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Airlock MoonChat UI Demo</title>
    <script type="importmap">
      {
        "imports": {
          "@duckdb/duckdb-wasm": "https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@1.33.1-dev18.0/+esm"
        }
      }
    </script>
    <script>
      (function () {
        if (typeof Worker === "undefined") {
          return;
        }
        const OriginalWorker = Worker;
        function WrappedWorker(scriptURL, options) {
          try {
            return new OriginalWorker(scriptURL, options);
          } catch (err) {
            const url = typeof scriptURL === "string" ? scriptURL : String(scriptURL);
            if (!(url.startsWith("http://") || url.startsWith("https://"))) {
              throw err;
            }
            try {
              const xhr = new XMLHttpRequest();
              xhr.open("GET", url, false);
              xhr.send(null);
              if (xhr.status >= 200 && xhr.status < 300) {
                const blob = new Blob([xhr.responseText], { type: "application/javascript" });
                const blobUrl = URL.createObjectURL(blob);
                return new OriginalWorker(blobUrl, options);
              }
            } catch (_) {
              // fall through to throw original error
            }
            throw err;
          }
        }
        WrappedWorker.prototype = OriginalWorker.prototype;
        Worker = WrappedWorker;
      })();
    </script>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/_build/js/release/build/cmd/ui_demo/ui_demo.js"></script>
  </body>
</html>
